# Tips


Use cidr.xyz for calculate a range.


### VPC  

* Think of a VPC as a logical datacenter in AWS;  
* Consists of IGWs (Or Virtual Private Gateway), Route Tables, Network Access Control Lists, Subnets, and Security Groups;  
* 1 Subnet = 1 Availability Zone;  
* SG are stateful; Network ACL are stateless;  
* NO TRANSITIVE PEERING;  
* New VPC created by default a Route Tables, Network ACL and SG;
* Reserve IP 0,1,2,3,255(view the link)  
* One IG per VPC;  
* It won't create any subnets, nor will it create a default internet gateway;  
* SG can't span VPC


### NAT Instances  

* When creating a NAT instance,  Disable Source/Destination Check on the instance;  
* NAT instance must be in a public subnet;  
* There must be a route out of the private subnet to the NAT instance, in order for this to work;  
* The amount of traffic that NAT instances can support depends on the instance size. If you are bottlenecking, increase the instance size;  
* You can create HA using Autoscaling Groups, multiple subnets in different AZs, and a script to automate failover;  
* Behind a SG;  

### Nat Gateways  

* Redundant inside the AZ;  
* Preferred by the enterprise;  
* Starts at 5Gbps and scale currently to 45Gbps;  
* No need to patch;  
* Not associated assigned a public ip address;  
* Automatically assigned a public ip address;  
* Remember to update your route tables;  
* No need to disable Source/Destination Checks;  

### Network ACL  

* Your VPC automatically comes a default network ACL, and by default it allows all outbound and inbound traffic;  
* You can create custom network ACLs. By default, each custom network ACL denies all inbound and outbound traffic until you add rules;  
* Each subnet in your VPC must be associate with a network ACL. If you don't explicitly associate a subnet with network ACL, the subnet is automatically associated with the default network ACL;  
* Block IP addresses using network ACLs not Security Groups;
* You can associate a network ACL with a multiple subnets;  
* A subnet can be associated with only one network ACL at a time;  
* Network ACLs contain a numbered list of rules that is evaluated in order, starting with the lowest numbered rule;  
* Network ACLs have separate inbound and outbound rules, and each rule can either allow or deny traffic;  
* Network ACLs are stateless; responses to allowed inbound traffic are subject to the rules for outbound traffic(and vice versa);  

### VPC Flow Logs  

* You cannot enable flow logs for VPCs that are peered with your VPC unless the peer VPC is in your account;  
* You cannot tag a flow log;  
* After you've created a flow log, you cannot change its configuration; for example, you can't associate a different IAM role with the flow log;  
* Not all UP traffic is monitored:
  * Traffic generated by instances when they contact the Amazon DNS server. If you use your own DNS server, then all traffic to that DNS server is logged.  
  * Traffic generated by a Windows instance for aws windows license activation;  
  * Traffic to and from 169,254,169.251 for instance metadata;
  * DHCP traffic;  
  * Traffic to the reserved IP address for the default VPC routes;  

### Direct Connect  

* Direct Connect directly connects your data center to AWS;  
* Useful for high throughput workloads (ie lost of network traffic);  
* Or if you need a stable and reliable secure connection;  
